"use strict";(self["webpackChunkrx"]=self["webpackChunkrx"]||[]).push([[432],{2432:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"My-box"},[e("div",{staticClass:"isLogin-box"},[e("div",{staticClass:"my-bg",style:{backgroundImage:`url(${t.userIofo.userBg||""})`}},[e("van-uploader",{staticClass:"upload-box",attrs:{"after-read":t.uploadBg}})],1),e("div",{staticClass:"UOp-box"},[e("div",{staticClass:"info-box"},[e("div",{staticClass:"userInfo"},[e("div",{staticClass:"userIcon"},[e("img",{staticClass:"auto_img",attrs:{src:t.userIofo.userImg,alt:""}})]),e("div",{staticClass:"username"},[e("p",[t._v(t._s(t.userIofo.nickName))]),e("span",[t._v(t._s(t.userIofo.desc||"暂无个性签名！"))])])]),e("div",{staticClass:"options"},t._l(t.options,(function(s,a){return e("van-cell",{key:a,attrs:{title:s.title,"is-link":""},on:{click:function(e){return t.goPage(s.name,s.title)}}})})),1)])])])])},i=[],o={name:"MyView",data(){return{userIofo:[],options:[{title:"个人资料",name:"Account"},{title:"我的订单",name:"Order"},{title:"我的收藏",name:"Like"},{title:"地址管理",name:"Address"},{title:"安全中心",name:"Secure"},{title:"我的足迹",name:"Record"}]}},methods:{getLoginState(){this.axios({method:"GET",url:"/findMy",params:{appkey:this.appkey,tokenString:sessionStorage.getItem("userToken")}}).then((t=>{"A001"==t.data.code?(this.userIofo=t.data.result[0],this.isLoginState=!0,sessionStorage.setItem("userName",t.data.result[0].nickName)):(this.$router.push({name:"Login"}),this.$notify({message:t.data.msg}))}),(t=>{console.log(t)}))},uploadBg(t){let e=["gif","jpeg","jpg","png"],s=1,a=t.file.type.split("/")[1];-1==e.indexOf(a)&&this.$toast(`文件类型只支持${e.join(",")}`);const i=t.file.size/1048576;i>s&&this.$toast(`文件允许最大不能超过${s}MB`);let o=t.content.replace(/^data:image\/[A-Za-z]+;base64,/,"");const n=sessionStorage.getItem("userToken");n||(this.$toast("请先登录"),this.$router.push({name:"Login"})),this.$toast.loading({message:"上传中……",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/updateUserBg",data:{appkey:this.appkey,tokenString:n,imgType:a,serverBase64Img:o}}).then((t=>{this.$toast.clear(),"I001"==t.data.code?this.userIofo.userBg=t.data.userBg:700==t.data.code&&this.$router.push({name:"Home"})}),(t=>{console.log(t)}))},goPage(t,e){this.isChild=!this.isChild,this.$router.push({name:t,params:{title:e}})}},beforeMount(){this.getLoginState()}},n=o,r=s(3736),l=(0,r.Z)(n,a,i,!1,null,"3378b39c",null),u=l.exports}}]);
//# sourceMappingURL=432.aa98f286.js.map