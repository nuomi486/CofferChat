"use strict";(self["webpackChunkrx"]=self["webpackChunkrx"]||[]).push([[685],{4713:function(t,e,o){o.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-box"},[e("div",{staticClass:"bg"}),e("div",{staticClass:"bg-content"},[t._t("default")],2),t._t("bottomContext")],2)},n=[],a={name:"BgBox"},r=a,i=o(3736),l=(0,i.Z)(r,s,n,!1,null,"c5631910",null),c=l.exports},8459:function(t,e,o){o.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("van-nav-bar",{attrs:{title:t.title,"left-text":"返回","left-arrow":"",fixed:"",placeholder:""},on:{"click-left":t.onClickLeft}})},n=[],a={name:"NvaBarTav",props:["title"],methods:{onClickLeft(){this.$router.go(-1)}}},r=a,i=o(3736),l=(0,i.Z)(r,s,n,!1,null,"1181aa63",null),c=l.exports},8685:function(t,e,o){o.r(e),o.d(e,{default:function(){return p}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"MySecure"},[e("NavBarTav",{attrs:{title:"安全中心"}}),e("BgBox",{scopedSlots:t._u([{key:"bottomContext",fn:function(){return[e("van-button",{attrs:{round:"",block:"",type:"primary"},on:{click:t.loginOut}},[t._v("退出登录")])]},proxy:!0}])},[e("div",{staticClass:"options"},[e("van-cell",{attrs:{title:"修改密码","is-link":""},on:{click:function(e){t.show=!0}}}),e("van-cell",{attrs:{title:"注销账号","is-link":""},on:{click:t.destroyAccount}})],1)]),e("van-popup",{attrs:{closeable:"",round:"",position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("h2",{staticClass:"title"},[t._v("修改密码")]),e("div",{staticClass:"inputs"},[e("van-form",{on:{submit:t.updatePassword}},[e("van-field",{attrs:{type:t.event.showEye?"text":"password",name:"oldPassword",label:"旧密码","right-icon":t.event.showEye?"eye-o":"closed-eye",placeholder:"请输入密码"},on:{"click-right-icon":function(e){t.event.showEye=!t.event.showEye}},model:{value:t.event.password,callback:function(e){t.$set(t.event,"password",e)},expression:"event.password"}}),e("van-field",{attrs:{type:t.now.showEye?"text":"password",name:"password",label:"新密码","right-icon":t.now.showEye?"eye-o":"closed-eye",placeholder:"请输入密码"},on:{"click-right-icon":function(e){t.now.showEye=!t.now.showEye}},model:{value:t.now.password,callback:function(e){t.$set(t.now,"password",e)},expression:"now.password"}}),e("div",{staticClass:"commit"},[e("van-button",{attrs:{round:"",block:"",type:"primary","native-type":"submit"}},[t._v("确认修改")])],1)],1)],1)])],1)},n=[],a=o(8459),r=o(4713),i=o(4605),l={name:"SecureView",components:{NavBarTav:a.Z,BgBox:r.Z},data(){return{show:!1,now:{password:"",showEye:!1},event:{password:"",showEye:!1}}},methods:{loginOut(){this.$toast.loading({message:"加载中……",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/logout",data:{appkey:this.appkey,tokenString:sessionStorage.getItem("userToken")}}).then((t=>{this.$toast.clear(),console.log(t.data),"F001"==t.data.code&&(sessionStorage.removeItem("userToken"),this.$notify({message:t.data.msg}),sessionStorage.setItem("indexName","Home"),this.$store.commit("SetIndexName","Home"),this.$router.push({name:"Home"}),sessionStorage.removeItem("userName"))}),(t=>{console.log(t)}))},updatePassword(t){const e=sessionStorage.getItem("userToken");e||this.$router.push({name:"Login"});let o={password:{value:t.password,errorMsg:"密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/}},s=i.$.valid(o);s&&(t.tokenString=e,t.appkey=this.appkey,this.axios({method:"POST",url:"/updatePassword",data:{...t}}).then((t=>{this.$toast.clear(),"E001"==t.data.code&&(sessionStorage.removeItem("userToken"),this.$toast(t.data.msg),this.$router.push({name:"Login"}))}),(t=>{console.log(t)})))},destroyAccount(){this.$dialog.confirm({message:"是否确认注销账号，一旦确认注销将无法恢复！"}).then((()=>{console.log("啪叽一下，账号就没了！")})).catch((()=>{}))}}},c=l,u=o(3736),d=(0,u.Z)(c,s,n,!1,null,"1efe9865",null),p=d.exports},4605:function(t,e,o){o.d(e,{$:function(){return r}});o(6743);var s=o(8848),n=o(6369);n.ZP.use(s.Z);class a{constructor(){}valid(t){for(let e in t)if(!t[e].reg.test(t[e].value))return(0,s.Z)(t[e].errorMsg),!1;return!0}}const r=new a}}]);
//# sourceMappingURL=685.76bd6804.js.map