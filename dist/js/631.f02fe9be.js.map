{"version":3,"file":"js/631.f02fe9be.js","mappings":"mIAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQJ,EAAIK,MAAM,YAAY,KAAK,aAAa,GAAG,MAAQ,GAAG,YAAc,IAAIC,GAAG,CAAC,aAAaN,EAAIO,cAChM,EACGC,EAAkB,GCUtB,GACAC,KAAAA,YACAC,MAAAA,CAAAA,SACAC,QAAAA,CACAJ,cACA,mBACA,IClBuR,I,UCOnRK,GAAY,OACd,EACAb,EACAS,GACA,EACA,KACA,WACA,MAIF,EAAeI,EAAiB,O,oEClBhC,IAAIb,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACW,YAAY,gBAAgB,CAACX,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,QAAQU,YAAYd,EAAIe,GAAG,CAAC,CAACC,IAAI,QAAQC,GAAG,WAA4B,EAACC,OAAM,OAAUhB,EAAG,MAAM,CAACA,EAAG,MAAM,CAACW,YAAY,WAAWT,MAAM,CAAC,IAAMJ,EAAImB,WAAWC,eAAelB,EAAG,MAAM,CAACW,YAAY,cAAc,CAACX,EAAG,MAAM,CAACW,YAAY,YAAY,CAACX,EAAG,MAAM,CAACW,YAAY,iCAAiC,CAACX,EAAG,MAAM,CAACW,YAAY,MAAM,CAACX,EAAG,MAAM,CAACW,YAAY,YAAY,CAACb,EAAIqB,GAAGrB,EAAIsB,GAAGtB,EAAImB,WAAWV,SAASP,EAAG,MAAM,CAACW,YAAY,cAAc,CAACb,EAAIqB,GAAGrB,EAAIsB,GAAGtB,EAAImB,WAAWI,aAAarB,EAAG,MAAM,CAACW,YAAY,aAAa,CAACb,EAAIqB,GAAG,IAAIrB,EAAIsB,GAAGtB,EAAImB,WAAWK,YAAYtB,EAAG,MAAM,CAACW,YAAY,YAAYb,EAAIyB,GAAIzB,EAAImB,WAAWO,OAAO,SAASC,EAAKC,GAAO,OAAO1B,EAAG,MAAM,CAACc,IAAIY,EAAMf,YAAY,sBAAsB,CAACX,EAAG,MAAM,CAACW,YAAY,iBAAiB,CAACb,EAAIqB,GAAGrB,EAAIsB,GAAGK,EAAKtB,UAAUH,EAAG,MAAM,CAACW,YAAY,MAAMb,EAAIyB,GAAIE,EAAKE,MAAM,SAASC,EAAMC,GAAQ,OAAO7B,EAAG,MAAM,CAACc,IAAIe,EAAOlB,YAAY,YAAYmB,MAAM,CAACC,OAAQN,EAAKO,WAAaH,EAAQ,aAAaJ,EAAKtB,MAAM8B,QAAU,GAAG7B,GAAG,CAAC,MAAQ,SAAS8B,GAAQ,OAAOpC,EAAIqC,OAAOV,EAAKI,EAAQ,IAAG,CAAC/B,EAAIqB,GAAG,IAAIrB,EAAIsB,GAAGQ,EAAMzB,OAAO,MAAO,IAAE,IAAK,IAAE,GAAGH,EAAG,MAAM,CAACW,YAAY,kBAAkB,CAACX,EAAG,MAAM,CAACW,YAAY,eAAe,CAACb,EAAIqB,GAAG,UAAUnB,EAAG,MAAM,CAACW,YAAY,iBAAiB,CAACX,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,QAAQ,cAAc,KAAK,gBAAgB,IAAIkC,MAAM,CAACC,MAAOvC,EAAIwC,SAASC,MAAOC,SAAS,SAAUC,GAAM3C,EAAI4C,KAAK5C,EAAIwC,SAAU,QAASG,EAAK,EAACE,WAAW,qBAAqB,KAAK3C,EAAG,MAAM,CAACW,YAAY,YAAY,CAACX,EAAG,MAAM,CAACW,YAAY,cAAc,CAACb,EAAIqB,GAAG,UAAUnB,EAAG,MAAM,CAACW,YAAY,aAAa,CAACX,EAAG,MAAM,CAACW,YAAY,WAAWb,EAAIyB,GAAIzB,EAAImB,WAAW2B,MAAM,SAASnB,EAAKC,GAAO,OAAO1B,EAAG,MAAM,CAACc,IAAIY,EAAMf,YAAY,aAAa,CAACb,EAAIqB,GAAG,IAAIrB,EAAIsB,GAAGM,EAAQ,GAAG,IAAI5B,EAAIsB,GAAGK,GAAM,MAAO,IAAE,WAAWzB,EAAG,mBAAmB,CAACA,EAAG,wBAAwB,CAACE,MAAM,CAAC,KAAO,MAAM,MAAQJ,EAAI+C,YAAY,KAAO,OAAOzC,GAAG,CAAC,MAAQN,EAAIgD,aAAa9C,EAAG,wBAAwB,CAACE,MAAM,CAAC,KAAO,OAAO,MAAQJ,EAAIiD,OAAS,UAAU,GAAG,KAAO,MAAM3C,GAAG,CAAC,MAAQN,EAAIkD,YAAYhD,EAAG,0BAA0B,CAACE,MAAM,CAAC,KAAO,UAAU,MAAQ,UAAU,KAAO,SAASE,GAAG,CAAC,MAAQ,SAAS8B,GAAQ,OAAOpC,EAAImD,UAAS,EAAO,KAAIjD,EAAG,0BAA0B,CAACE,MAAM,CAAC,KAAO,SAAS,MAAQ,UAAU,KAAO,QAAQE,GAAG,CAAC,MAAQ,SAAS8B,GAAQ,OAAOpC,EAAImD,UAAS,EAAM,MAAK,IAAI,EACp6E,EACG3C,EAAkB,G,UCiEtB,GACAC,KAAAA,eACA2C,OACA,OAEAjC,WAAAA,CAAAA,EAEAU,KAAAA,GAEAW,SAAAA,CACAa,IAAAA,GACAZ,MAAAA,GAGAM,YAAAA,GAEAE,QAAAA,EAEA,EACAK,SAAAA,CACAD,MAEA,OADA,oDACA,iBACA,GAEAE,MAAAA,CACA1B,OAEA,SACA,mBACA2B,EAAAA,KAAAA,EAAAA,IAAAA,IAEAA,EAAAA,MACA,SACAA,EAAAA,KAAAA,IACA9B,GAAAA,CAAAA,IAEA,oBACA,GAEAf,QAAAA,CACA8C,gBACA,qBACAC,QAAAA,QACAC,aAAAA,EACAC,SAAAA,IAEA,YACAC,OAAAA,MACAC,IAAAA,iBACAC,OAAAA,CACAC,OAAAA,KAAAA,OACAX,IAAAA,KAAAA,OAEAY,MAAAC,IAGA,GAFA,oBAEA,kBACA,uBACAd,EAAAA,KAAAA,EAAAA,KAAAA,MAAAA,MACA,SACA,iCACAZ,EAAAA,KAAAA,IAEA,SAEA2B,EAAAA,MAAAA,EAAAA,EAAAA,SAEAA,EAAAA,UAAAA,EAEAA,EAAAA,KAAAA,GAEA,sBACAC,EAAAA,KAAAA,IACA,OACAD,EAAAA,KAAAA,KAAAA,CAAA9D,MAAAA,GACA,IAEA,iBACAqB,EAAAA,KAAAA,EACA,IAEA0B,EAAAA,MAAAA,EACA,kBACA,2CACA,KACAiB,IACAC,QAAAA,IAAAA,EAAAA,GAEA,EACA/D,cACA,mBACA,EACA8B,OAAAA,EAAAA,GAEA,iBAGAkC,EAAAA,UAAAA,EACA,EACApB,SAAAA,GACA,0CAEA,IACA,oBACA,mBAAA1C,KAAAA,WAGA,OACA+D,cACAR,OAAAA,KAAAA,OACAvB,MAAAA,KAAAA,SAAAA,MACAY,IAAAA,KAAAA,SAAAA,KAEA,KACA,+BACAoB,EAAAA,KAAAA,EAAAA,KAAAA,EAAAA,WAAAA,MAAAA,IAEArB,EAAAA,KAAAA,EAAAA,KAAAA,KAEA,qBACAM,QAAAA,QACAC,aAAAA,EACAC,SAAAA,IAEA,YACAC,OAAAA,OACAC,IAAAA,eACAV,SACAa,MAAAC,IAGA,GAFA,oBAEA,iBAEA,KAOA,CACA,SACAQ,EAAAA,KAAAA,EAAAA,KAAAA,KACAC,eAAAA,QAAAA,UAAAA,KAAAA,UAAAA,IACA,mBAAAlE,KAAAA,OACA,MAXA,kBACA,wBACA,oBAEA,qBASA,IACA4D,IACAC,QAAAA,IAAAA,EAAAA,GAEA,EACAM,iBACA,0CACA,qBACAlB,QAAAA,QACAC,aAAAA,EACAC,SAAAA,IAEA,YACAC,OAAAA,MACAC,IAAAA,iBACAC,OAAAA,CACAC,OAAAA,KAAAA,OACAQ,iBAEAP,MAAAC,IACA,oBAEA,kCACAG,IACAC,QAAAA,IAAAA,EAAAA,GAEA,EACAtB,YACA,mBAAAvC,KAAAA,YACAkE,eAAAA,QAAAA,YAAAA,WACA,4CACA,EACAE,UACA,0CACA,qBACAnB,QAAAA,QACAC,aAAAA,EACAC,SAAAA,IAEA,YACAC,OAAAA,MACAC,IAAAA,YACAC,OAAAA,CACAC,OAAAA,KAAAA,OACAX,IAAAA,KAAAA,SAAAA,IACAmB,iBAEAP,MAAAC,IACA,oBAEA,yBACA,yBACA,IACAG,IACAC,QAAAA,IAAAA,EAAAA,GAEA,EACApB,WACA,0CACA,KAEAY,EADA,YACAA,WAGAA,QAGA,qBACAJ,QAAAA,QACAC,aAAAA,EACAC,SAAAA,IAEA,YACAC,OAAAA,OACAC,MACAV,KAAAA,CACAY,OAAAA,KAAAA,OACAX,IAAAA,KAAAA,SAAAA,IACAmB,iBAEAP,MAAAC,IACA,oBAEA,kBACA,eACA,yBAEA,kBACA,eACA,0BAGA,wBACA,mBAAAzD,KAAAA,UACA,IACA4D,IACAC,QAAAA,IAAAA,EAAAA,GAEA,GAEAQ,cACA,qBACA,sBACA,cACA,EACAC,WAAAA,CAAAC,UAAAA,EAAAA,IChU0R,I,UCQtRpE,GAAY,OACd,EACAb,EACAS,GACA,EACA,KACA,WACA,MAIF,EAAeI,EAAiB,O","sources":["webpack://rx/./src/components/NavBarTav.vue","webpack://rx/src/components/NavBarTav.vue","webpack://rx/./src/components/NavBarTav.vue?771d","webpack://rx/./src/components/NavBarTav.vue?3150","webpack://rx/./src/views/ShopInfoView.vue","webpack://rx/src/views/ShopInfoView.vue","webpack://rx/./src/views/ShopInfoView.vue?665d","webpack://rx/./src/views/ShopInfoView.vue?be70"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('van-nav-bar',{attrs:{\"title\":_vm.title,\"left-text\":\"返回\",\"left-arrow\":\"\",\"fixed\":\"\",\"placeholder\":\"\"},on:{\"click-left\":_vm.onClickLeft}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <van-nav-bar\r\n    :title=\"title\"\r\n    left-text=\"返回\"\r\n    left-arrow\r\n    fixed\r\n    placeholder\r\n    @click-left=\"onClickLeft\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:'NvaBarTav',\r\n    props:[\"title\"],\r\n    methods:{\r\n        onClickLeft(){\r\n            this.$router.go(-1)\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NavBarTav.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NavBarTav.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NavBarTav.vue?vue&type=template&id=1181aa63&scoped=true&\"\nimport script from \"./NavBarTav.vue?vue&type=script&lang=js&\"\nexport * from \"./NavBarTav.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1181aa63\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"ShopInfo-box\"},[_c('NavBarTav',{attrs:{\"title\":\"商品详情\"},scopedSlots:_vm._u([{key:\"right\",fn:function(){return undefined},proxy:true}])}),_c('div',[_c('img',{staticClass:\"auto_img\",attrs:{\"src\":_vm.ChatDetail.large_img}})]),_c('div',{staticClass:\"Detail-box\"},[_c('div',{staticClass:\"info-box\"},[_c('div',{staticClass:\"priceAndchatName-box clearfix\"},[_c('div',{staticClass:\"fl\"},[_c('div',{staticClass:\"chatName\"},[_vm._v(_vm._s(_vm.ChatDetail.name))]),_c('div',{staticClass:\"chatEnName\"},[_vm._v(_vm._s(_vm.ChatDetail.enname))])]),_c('div',{staticClass:\"chatPrice\"},[_vm._v(\"￥\"+_vm._s(_vm.ChatDetail.price))])]),_c('div',{staticClass:\"rule-box\"},_vm._l((_vm.ChatDetail.rules),function(item,index){return _c('div',{key:index,staticClass:\"rule-item clearfix\"},[_c('div',{staticClass:\"rule-title fl\"},[_vm._v(_vm._s(item.title))]),_c('div',{staticClass:\"fl\"},_vm._l((item.rule),function(items,indexs){return _c('div',{key:indexs,staticClass:\"r-item fl\",class:{active: item.ruleIndex == indexs, 'large-text':item.title.length >= 4},on:{\"click\":function($event){return _vm.onRule(item,indexs)}}},[_vm._v(\" \"+_vm._s(items.title)+\" \")])}),0)])}),0),_c('div',{staticClass:\"c-box clearfix\"},[_c('div',{staticClass:\"select-c fl\"},[_vm._v(\"选择数量\")]),_c('div',{staticClass:\"counts-box fr\"},[_c('van-stepper',{attrs:{\"theme\":\"round\",\"button-size\":\"22\",\"disable-input\":\"\"},model:{value:(_vm.ruleData.count),callback:function ($$v) {_vm.$set(_vm.ruleData, \"count\", $$v)},expression:\"ruleData.count\"}})],1)]),_c('div',{staticClass:\"desc-box\"},[_c('div',{staticClass:\"desc-title\"},[_vm._v(\"商品描述\")]),_c('div',{staticClass:\"desc-text\"},[_c('div',{staticClass:\"context\"},_vm._l((_vm.ChatDetail.desc),function(item,index){return _c('div',{key:index,staticClass:\"text-item\"},[_vm._v(\" \"+_vm._s(index + 1)+\"、\"+_vm._s(item)+\" \")])}),0)])])])]),_c('van-goods-action',[_c('van-goods-action-icon',{attrs:{\"icon\":\"bag\",\"badge\":_vm.shoppCounts,\"text\":\"购物袋\"},on:{\"click\":_vm.goBagPage}}),_c('van-goods-action-icon',{attrs:{\"icon\":\"like\",\"color\":_vm.isLike ? '#ff5000':'',\"text\":\"收藏\"},on:{\"click\":_vm.onUpLike}}),_c('van-goods-action-button',{attrs:{\"type\":\"warning\",\"color\":\"#0934BA\",\"text\":\"加入购物袋\"},on:{\"click\":function($event){return _vm.onAddBag(false)}}}),_c('van-goods-action-button',{attrs:{\"type\":\"danger\",\"color\":\"#00adb5\",\"text\":\"立即购买\"},on:{\"click\":function($event){return _vm.onAddBag(true)}}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"ShopInfo-box\">\r\n    <NavBarTav title=\"商品详情\">\r\n      <template #right> </template>\r\n    </NavBarTav>\r\n    <div>\r\n      <img class=\"auto_img\" :src=\"ChatDetail.large_img\" />\r\n    </div>\r\n    <div class=\"Detail-box\">\r\n      <div class=\"info-box\">\r\n        <!-- 商品价格和名称 -->\r\n        <div class=\"priceAndchatName-box clearfix\">\r\n          <div class=\"fl\">\r\n            <div class=\"chatName\">{{ ChatDetail.name }}</div>\r\n            <div class=\"chatEnName\">{{ ChatDetail.enname }}</div>\r\n          </div>\r\n          <div class=\"chatPrice\">￥{{ ChatDetail.price }}</div>\r\n        </div>\r\n        <!-- 商品规格 -->\r\n        <div class=\"rule-box\">\r\n          <!-- 温度，糖分，奶油 -->\r\n          <div class=\"rule-item clearfix\" v-for=\"(item,index) in ChatDetail.rules\" :key=\"index\">\r\n            <div class=\"rule-title fl\">{{item.title}}</div>\r\n            <div class=\"fl\">\r\n              <div class=\"r-item fl\" \r\n              @click=\"onRule(item,indexs)\" \r\n              :class=\"{active: item.ruleIndex == indexs, 'large-text':item.title.length >= 4}\"\r\n              v-for=\"(items,indexs) in item.rule\" \r\n              :key=\"indexs\"\r\n              >\r\n                {{items.title}}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- 商品数量 -->\r\n        <div class=\"c-box clearfix\">\r\n          <div class=\"select-c fl\">选择数量</div>\r\n          <div class=\"counts-box fr\">\r\n            <van-stepper v-model=\"ruleData.count\" theme=\"round\" button-size=\"22\" disable-input />\r\n          </div>\r\n        </div>\r\n        <!-- 商品描述 -->\r\n        <div class=\"desc-box\">\r\n          <div class=\"desc-title\">商品描述</div>\r\n          <div class=\"desc-text\">\r\n            <div class=\"context\">\r\n              <div class=\"text-item\" v-for=\"(item,index) in ChatDetail.desc\" :key=\"index\">\r\n                {{index + 1}}、{{item}}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 底部购物操作nav -->\r\n    <van-goods-action>\r\n      <van-goods-action-icon icon=\"bag\" :badge=\"shoppCounts\" @click=\"goBagPage\" text=\"购物袋\" />\r\n      <van-goods-action-icon icon=\"like\" :color=\"isLike ? '#ff5000':''\" @click=\"onUpLike\" text=\"收藏\" />\r\n      <van-goods-action-button type=\"warning\" color=\"#0934BA\" @click=\"onAddBag(false)\" text=\"加入购物袋\" />\r\n      <van-goods-action-button type=\"danger\" color=\"#00adb5\" @click=\"onAddBag(true)\" text=\"立即购买\" />\r\n    </van-goods-action>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavBarTav from '@/components/NavBarTav.vue';\r\nexport default {\r\n    name: \"ShopInfoView\",\r\n    data() {\r\n        return {\r\n            // 异步获取的数据体\r\n            ChatDetail: {},\r\n            // 规格数据\r\n            rule: [],\r\n            // 整体数据\r\n            ruleData: {\r\n                pid: \"\",\r\n                count: 1\r\n            },\r\n            // 商品数量\r\n            shoppCounts: \"\",\r\n            // 是否被收藏\r\n            isLike: false\r\n        };\r\n    },\r\n    computed: {\r\n        pid() {\r\n            this.ruleData.pid = sessionStorage.getItem(\"chatPid\");\r\n            return this.ruleData.pid;\r\n        },\r\n    },\r\n    watch: {\r\n        rule() {\r\n            // console.log(\"改变了\",now);\r\n            let arr = [];\r\n            this.rule.map(v => {\r\n                arr.push(v, \"/\");\r\n            });\r\n            arr.pop();\r\n            let rules = \"\";\r\n            arr.map(v => {\r\n                rules += v;\r\n            });\r\n            this.ruleData.rule = rules;\r\n        },\r\n    },\r\n    methods: {\r\n        getChatDetail() {\r\n            this.$toast.loading({\r\n                message: \"加载中……\",\r\n                forbidClick: true,\r\n                duration: 0,\r\n            });\r\n            this.axios({\r\n                method: \"GET\",\r\n                url: \"/productDetail\",\r\n                params: {\r\n                    appkey: this.appkey,\r\n                    pid: this.pid,\r\n                },\r\n            }).then((result) => {\r\n                this.$toast.clear();\r\n                // console.log(result.data);\r\n                if (result.data.code == 600) {\r\n                   let data = result.data.result[0];\r\n                   data.desc = data.desc.split(/\\n/);\r\n                   let rules = [];\r\n                   let ruleData = ['tem','sugar','milk','cream']\r\n                   ruleData.map( obj => {\r\n                    // 初始化对象\r\n                    let r = {}\r\n                    // 给对象设置title值为data的[v+'_desc']\r\n                    r.title = data[obj+'_desc']\r\n                    // 设置默认激活的下标\r\n                    r.ruleIndex = 0;\r\n                    // 每项规格\r\n                    r.rule = []\r\n                    //获取规格字符串\r\n                    let ruleString = data[obj].split('/');\r\n                    ruleString.map( v => {\r\n                      if(v != ''){\r\n                        r.rule.push({title: v})\r\n                      }\r\n                    })\r\n                    if(r.rule.length > 0){\r\n                      rules.push(r)\r\n                    }\r\n                   })\r\n                   data.rules = rules\r\n                   this.ChatDetail = data\r\n                   this.$store.commit('SetRecording',this.pid)\r\n                }\r\n            }, (error) => {\r\n                console.log(error);\r\n            });\r\n        },\r\n        onClickLeft() {\r\n            this.$router.go(-1);\r\n        },\r\n        onRule(val, index) {\r\n          // console.log(val);\r\n            if(val.ruleIndex == index){\r\n              return\r\n            }\r\n            val.ruleIndex = index\r\n        },\r\n        onAddBag(value) {\r\n          let tokenString = sessionStorage.getItem(\"userToken\");\r\n\r\n          if(!tokenString){\r\n            this.$toast('请先登录');\r\n            this.$router.push({name:'Login'});\r\n          }\r\n\r\n          let data = {\r\n            tokenString,\r\n            appkey: this.appkey,\r\n            count: this.ruleData.count,\r\n            pid: this.ruleData.pid\r\n          }\r\n          let rs = [];\r\n          this.ChatDetail.rules.map(v => {\r\n            rs.push(v.rule[v.ruleIndex].title)\r\n          })\r\n          data.rule = rs.join('/');\r\n\r\n          this.$toast.loading({\r\n              message: \"加载中……\",\r\n              forbidClick: true,\r\n              duration: 0,\r\n          });\r\n          this.axios({\r\n              method: \"post\",\r\n              url: \"/addShopcart\",\r\n              data,\r\n          }).then((result) => {\r\n              this.$toast.clear();\r\n              // console.log(result.data);\r\n              if (result.data.code == 3000) {\r\n                  // console.log(result.data);\r\n                  if(!value){\r\n                    if (result.data.status == 1) {\r\n                        this.$toast(result.data.msg);\r\n                        this.shoppCounts ++\r\n                    }else {\r\n                        this.$toast(\"修改数量成功\");\r\n                    }\r\n                  }else{\r\n                    let a = []\r\n                    a.push(result.data.sid)\r\n                    sessionStorage.setItem(\"sidKeys\", JSON.stringify(a));\r\n                    this.$router.push({name:'Pay'})\r\n                  }\r\n                \r\n              }\r\n          }, (error) => {\r\n              console.log(error);\r\n          });\r\n        },\r\n        getShoppCounts() {\r\n            let tokenString = sessionStorage.getItem(\"userToken\");\r\n            this.$toast.loading({\r\n                message: \"加载中……\",\r\n                forbidClick: true,\r\n                duration: 0,\r\n            });\r\n            this.axios({\r\n                method: \"GET\",\r\n                url: \"/shopcartCount\",\r\n                params: {\r\n                    appkey: this.appkey,\r\n                    tokenString\r\n                },\r\n            }).then((result) => {\r\n                this.$toast.clear();\r\n                // console.log(result);\r\n                this.shoppCounts = result.data.result;\r\n            }, (error) => {\r\n                console.log(error);\r\n            });\r\n        },\r\n        goBagPage() {\r\n            this.$router.push({ name: \"Shopbag\" });\r\n            sessionStorage.setItem(\"indexName\", \"Shopbag\");\r\n            this.$store.commit(\"SetIndexName\", \"Shopbag\");\r\n        },\r\n        getLike() {\r\n            let tokenString = sessionStorage.getItem(\"userToken\");\r\n            this.$toast.loading({\r\n                message: \"加载中……\",\r\n                forbidClick: true,\r\n                duration: 0,\r\n            });\r\n            this.axios({\r\n                method: \"GET\",\r\n                url: \"/findlike\",\r\n                params: {\r\n                    appkey: this.appkey,\r\n                    pid: this.ruleData.pid,\r\n                    tokenString\r\n                },\r\n            }).then((result) => {\r\n                this.$toast.clear();\r\n                // console.log(result.data);\r\n                if (result.data.result.length > 0) {\r\n                    this.isLike = !this.isLike;\r\n                }\r\n            }, (error) => {\r\n                console.log(error);\r\n            });\r\n        },\r\n        onUpLike() {\r\n            let tokenString = sessionStorage.getItem(\"userToken\");\r\n            let url = \"\";\r\n            if (this.isLike) {\r\n                url = \"/notlike\";\r\n            }\r\n            else {\r\n                url = \"/like\";\r\n            }\r\n            // console.log(url);\r\n            this.$toast.loading({\r\n                message: \"加载中……\",\r\n                forbidClick: true,\r\n                duration: 0,\r\n            });\r\n            this.axios({\r\n                method: \"post\",\r\n                url,\r\n                data: {\r\n                    appkey: this.appkey,\r\n                    pid: this.ruleData.pid,\r\n                    tokenString\r\n                },\r\n            }).then((result) => {\r\n                this.$toast.clear();\r\n                // console.log(result.data);\r\n                if (result.data.code == 800) {\r\n                    this.isLike = true;\r\n                    this.$toast(result.data.msg);\r\n                }\r\n                else if (result.data.code == 900) {\r\n                    this.isLike = false;\r\n                    this.$toast(result.data.msg);\r\n                }\r\n                else {\r\n                    this.$toast(result.data.msg);\r\n                    this.$router.push({ name: \"Login\" });\r\n                }\r\n            }, (error) => {\r\n                console.log(error);\r\n            });\r\n        }\r\n    },\r\n    beforeMount() {\r\n        this.getChatDetail();\r\n        this.getShoppCounts();\r\n        this.getLike();\r\n    },\r\n    components: { NavBarTav }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.ShopInfo-box {\r\n  /deep/ .van-stepper--round .van--stepper__plus {\r\n    background-color: #0c34ba !important;\r\n  }\r\n\r\n  .Detail-box {\r\n    margin-bottom: 7vw;\r\n    padding: 0 10px;\r\n\r\n    //   background-color: black;\r\n    .info-box {\r\n      background-color: #fff;\r\n      position: relative;\r\n      top: -25px;\r\n      padding: 20px;\r\n      border-top-left-radius: 15px;\r\n      border-top-right-radius: 15px;\r\n\r\n      // 奶茶标题样式\r\n      .priceAndchatName-box {\r\n        .chatName {\r\n          color: black;\r\n          font-size: 16px;\r\n          font-weight: bold;\r\n        }\r\n\r\n        .chatEnName {\r\n          font-size: 12px;\r\n          margin: 5px 0;\r\n          color: #a699b3;\r\n        }\r\n\r\n        .chatPrice {\r\n          color: #00adb5;\r\n          font-size: 18px;\r\n          font-weight: bold;\r\n          text-align: right;\r\n        }\r\n      }\r\n\r\n      // 奶茶规格样式\r\n      .rule-box {\r\n        margin-top: 20px;\r\n        border-bottom: 1px solid #e0dde2;\r\n\r\n        .rule-item {\r\n          margin-bottom: 15px;\r\n\r\n          .rule-title {\r\n            width: 60px;\r\n            color: black;\r\n            font-size: 14px;\r\n            line-height: 26px;\r\n          }\r\n\r\n          .r-item {\r\n            width: 70px;\r\n            height: 26px;\r\n            background-color: #eee;\r\n            color: black;\r\n            font-size: 14px;\r\n            text-align: center;\r\n            line-height: 27px;\r\n            background-repeat: 15px;\r\n            border-radius: 15px;\r\n            margin-left: 10px;\r\n\r\n            &.active {\r\n              background-color: #00adb5;\r\n              color: #fff;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // 奶茶数量样式\r\n      .c-box {\r\n        border-bottom: 1px solid #e0dde2;\r\n        margin-top: 20px;\r\n        padding-bottom: 20px;\r\n\r\n        .select-c {\r\n          font-size: 15px;\r\n          color: #000;\r\n        }\r\n      }\r\n\r\n      // 奶茶介绍样式\r\n      .desc-box {\r\n        margin: 15px 0;\r\n\r\n        .desc-title {\r\n          font-size: 15px;\r\n          margin-bottom: 10px;\r\n          color: #000;\r\n        }\r\n\r\n        .desc-text {\r\n          .context {\r\n            font-size: 12px;\r\n            text-indent: 2em;\r\n            margin-bottom: 8px;\r\n            white-space: pre-wrap;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ShopInfoView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ShopInfoView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShopInfoView.vue?vue&type=template&id=0bf16680&scoped=true&\"\nimport script from \"./ShopInfoView.vue?vue&type=script&lang=js&\"\nexport * from \"./ShopInfoView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShopInfoView.vue?vue&type=style&index=0&id=0bf16680&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0bf16680\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","title","on","onClickLeft","staticRenderFns","name","props","methods","component","staticClass","scopedSlots","_u","key","fn","proxy","ChatDetail","large_img","_v","_s","enname","price","_l","rules","item","index","rule","items","indexs","class","active","ruleIndex","length","$event","onRule","model","value","ruleData","count","callback","$$v","$set","expression","desc","shoppCounts","goBagPage","isLike","onUpLike","onAddBag","data","pid","computed","watch","arr","getChatDetail","message","forbidClick","duration","method","url","params","appkey","then","result","r","ruleString","error","console","val","tokenString","rs","a","sessionStorage","getShoppCounts","getLike","beforeMount","components","NavBarTav"],"sourceRoot":""}