"use strict";(self["webpackChunkrx"]=self["webpackChunkrx"]||[]).push([[38],{4713:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-box"},[e("div",{staticClass:"bg"}),e("div",{staticClass:"bg-content"},[t._t("default")],2),t._t("bottomContext")],2)},a=[],o={name:"BgBox"},r=o,n=s(3736),l=(0,n.Z)(r,i,a,!1,null,"c5631910",null),c=l.exports},8459:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("van-nav-bar",{attrs:{title:t.title,"left-text":"返回","left-arrow":"",fixed:"",placeholder:""},on:{"click-left":t.onClickLeft}})},a=[],o={name:"NvaBarTav",props:["title"],methods:{onClickLeft(){this.$router.go(-1)}}},r=o,n=s(3736),l=(0,n.Z)(r,i,a,!1,null,"1181aa63",null),c=l.exports},3537:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-item"},[e("div",{staticClass:"cell-item-box"},[e("div",{staticClass:"pro-info-box"},[e("div",{staticClass:"pro-img fl"},[e("img",{staticClass:"auto_img",attrs:{src:t.item.smallImg||t.item.small_img,alt:""}})]),e("div",{staticClass:"pro-context"},[e("div",{staticClass:"pro-info"},[e("div",{staticClass:"pro-info-next"},[e("div",{staticClass:"pro-name"},[t._v(t._s(t.item.name))]),e("div",{staticClass:"pro-rule"},[t._v(t._s(t.item.rule))])]),e("div",{staticClass:"pro-enname"},[t._v(t._s(t.item.enname))])]),e("div",{staticClass:"pro-count-box"},[e("div",{staticClass:"pro-price fl"},[t._v("￥"+t._s(t.item.price))]),e("div",{staticClass:"pro-step-box fr"},[t._v("x"+t._s(t.item.count))])])])])])])},a=[],o={name:"OrderItem",props:{item:{type:Object,default(){return{name:"名称",rule:"规格",enname:"英语名",price:0,count:1}}}}},r=o,n=s(3736),l=(0,n.Z)(r,i,a,!1,null,"327038ac",null),c=l.exports},2209:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-list"},[e("div",{staticClass:"pro-box"},[e("div",{staticClass:"info-box clearfix"},[e("h3",[t._v("订单信息")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.infoTitleLeft,expression:"infoTitleLeft"}],staticClass:"title fl"},[t._v("订单编号："+t._s(t.infoTitleLeft))]),t.isRight?e("div",{staticClass:"re-info fr"},[t.getReceive?e("div",{staticClass:"clearfix"},[e("div",{staticClass:"fl"},[t._v("已完成")]),e("div",{staticClass:"fl delete",on:{click:t.remove}},[e("van-icon",{attrs:{name:"delete",size:"20"}})],1)]):e("div",{on:{click:t.confirmReceive}},[t._v("确认收货")])]):t._e()]),e("div",[e("div",{staticClass:"cell-list"},[t._t("default")],2),e("div",{staticClass:"circle"},[e("van-divider",{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 10px"},attrs:{dashed:""}}),e("div",{staticClass:"fl circle-box circle-left"}),e("div",{staticClass:"fr circle-box circle-right"})],1),e("div",{staticClass:"bottom-into"},[""!=t.date?e("div",{staticClass:"date"},[t._v(t._s(t.date))]):t._e(),e("div",{staticClass:"clearfix bottom-context"},[e("div",{staticClass:"fl counts"},[t._v("共计"+t._s(t.count)+"件商品")]),e("div",{staticClass:"fr total"},[t._v("合计：￥"+t._s(t.total))])])])])])])},a=[],o={name:"OrderLists",props:{infoTitleLeft:{type:String},isRight:{type:Boolean,default:!1},date:{type:String},count:{type:Number,default:0},total:{type:[Number,String],default:0},isStatus:{type:Number}},computed:{getReceive(){return 1!=this.isStatus}},methods:{confirmReceive(){this.$dialog.confirm({message:"确认该订单已经到手？"}).then((()=>{this.$emit("confirm-receive")})).catch((()=>{}))},remove(){this.$dialog.confirm({message:"正在删除订单，确认是否删除该订单？"}).then((()=>{this.$emit("remove")})).catch((()=>{}))}},beforeMount(){2==this.isState&&(this.isReceive=!this.isReceive)}},r=o,n=s(3736),l=(0,n.Z)(r,i,a,!1,null,"e7c60f0a",null),c=l.exports},5038:function(t,e,s){s.r(e),s.d(e,{default:function(){return f}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-box"},[e("NavBarTav",{attrs:{title:"我的订单"}}),e("BgBox",{scopedSlots:t._u([{key:"bottomContext",fn:function(){return[t.orders.length>0?e("div",t._l(t.orders,(function(s,i){return e("div",{key:i},[e("OrderLists",{attrs:{"info-title-left":s.oid,date:t._f("formatDate")(s.date,"yyyy-MM-dd hh:mm:ss"),count:s.count,total:s.total,isStatus:s.status,isRight:!0},on:{"confirm-receive":function(e){return t.confirmReceive(s,i)},remove:function(e){return t.removeOrder(s,i)}}},t._l(s.data,(function(t,s){return e("OrderItem",{key:s,attrs:{item:t}})})),1)],1)})),0):e("div",[e("van-empty",{staticClass:"custom-image",attrs:{image:"https://img01.yzcdn.cn/vant/custom-empty-image.png",description:"暂时没有订单数据哦！"}})],1)]},proxy:!0}])},[e("div",{staticClass:"tab-box"},[e("van-tabs",{attrs:{color:"#0c34ba"},on:{change:t.getOrders},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},t._l(t.tabData,(function(t,s){return e("van-tab",{key:s,attrs:{title:t,name:s}})})),1)],1)])],1)},a=[],o=s(8459),r=s(4713),n=s(2209),l=s(3537),c={name:"OrderView",components:{NavBarTav:o.Z,BgBox:r.Z,OrderLists:n.Z,OrderItem:l.Z},data(){return{tabIndex:"0",tabData:["全部","进行中","已完成"],orders:[]}},methods:{getOrders(){this.$toast.loading({message:"加载中……",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/findOrder",params:{appkey:this.appkey,tokenString:sessionStorage.getItem("userToken"),status:this.tabIndex}}).then((t=>{this.$toast.clear();let e=[];t.data.result.map((t=>{for(let i=0;i<e.length;i++)if(e[i].oid==t.oid)return e[i].data.push(t),e[i].count+=t.count,void(e[i].total+=t.count*t.price);let s={};s.oid=t.oid,s.count=t.count,s.total=t.count*t.price,s.status=t.status,s.date=t.createdAt,s.data=[t],e.push(s)})),this.orders=e}),(t=>{console.log(t)}))},confirmReceive(t,e){const s=sessionStorage.getItem("userToken");if(!s)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中……",forbidClick:!0,duration:0}),this.axios({method:"post",url:"/receive",data:{appkey:this.appkey,tokenString:s,oid:t.oid}}).then((s=>{this.$toast.clear(),8e4==s.data.code&&(1==this.tabIndex&&this.orders.splice(e,1),t.status=2),this.$toast(s.data.msg)}),(t=>{console.log(t)}))},removeOrder(t,e){const s=sessionStorage.getItem("userToken");if(!s)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中……",forbidClick:!0,duration:0}),this.axios({method:"post",url:"/removeOrder",data:{appkey:this.appkey,tokenString:s,oid:t.oid}}).then((t=>{this.$toast.clear(),9e4==t.data.code&&this.orders.splice(e,1),this.$toast(t.data.msg)}),(t=>{this.$toast.clear(),console.log(t)}))}},beforeMount(){this.getOrders()}},d=c,u=s(3736),v=(0,u.Z)(d,i,a,!1,null,null,null),f=v.exports}}]);
//# sourceMappingURL=38.fbf9a6d9.js.map