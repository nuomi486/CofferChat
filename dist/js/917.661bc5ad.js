"use strict";(self["webpackChunkrx"]=self["webpackChunkrx"]||[]).push([[917],{8459:function(t,s,e){e.d(s,{Z:function(){return d}});var a=function(){var t=this,s=t._self._c;return s("van-nav-bar",{attrs:{title:t.title,"left-text":"返回","left-arrow":"",fixed:"",placeholder:""},on:{"click-left":t.onClickLeft}})},i=[],r={name:"NvaBarTav",props:["title"],methods:{onClickLeft(){this.$router.go(-1)}}},o=r,n=e(3736),l=(0,n.Z)(o,a,i,!1,null,"1181aa63",null),d=l.exports},3537:function(t,s,e){e.d(s,{Z:function(){return d}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"order-item"},[s("div",{staticClass:"cell-item-box"},[s("div",{staticClass:"pro-info-box"},[s("div",{staticClass:"pro-img fl"},[s("img",{staticClass:"auto_img",attrs:{src:t.item.smallImg||t.item.small_img,alt:""}})]),s("div",{staticClass:"pro-context"},[s("div",{staticClass:"pro-info"},[s("div",{staticClass:"pro-info-next"},[s("div",{staticClass:"pro-name"},[t._v(t._s(t.item.name))]),s("div",{staticClass:"pro-rule"},[t._v(t._s(t.item.rule))])]),s("div",{staticClass:"pro-enname"},[t._v(t._s(t.item.enname))])]),s("div",{staticClass:"pro-count-box"},[s("div",{staticClass:"pro-price fl"},[t._v("￥"+t._s(t.item.price))]),s("div",{staticClass:"pro-step-box fr"},[t._v("x"+t._s(t.item.count))])])])])])])},i=[],r={name:"OrderItem",props:{item:{type:Object,default(){return{name:"名称",rule:"规格",enname:"英语名",price:0,count:1}}}}},o=r,n=e(3736),l=(0,n.Z)(o,a,i,!1,null,"327038ac",null),d=l.exports},2209:function(t,s,e){e.d(s,{Z:function(){return d}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"order-list"},[s("div",{staticClass:"pro-box"},[s("div",{staticClass:"info-box clearfix"},[s("h3",[t._v("订单信息")]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.infoTitleLeft,expression:"infoTitleLeft"}],staticClass:"title fl"},[t._v("订单编号："+t._s(t.infoTitleLeft))]),t.isRight?s("div",{staticClass:"re-info fr"},[t.getReceive?s("div",{staticClass:"clearfix"},[s("div",{staticClass:"fl"},[t._v("已完成")]),s("div",{staticClass:"fl delete",on:{click:t.remove}},[s("van-icon",{attrs:{name:"delete",size:"20"}})],1)]):s("div",{on:{click:t.confirmReceive}},[t._v("确认收货")])]):t._e()]),s("div",[s("div",{staticClass:"cell-list"},[t._t("default")],2),s("div",{staticClass:"circle"},[s("van-divider",{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 10px"},attrs:{dashed:""}}),s("div",{staticClass:"fl circle-box circle-left"}),s("div",{staticClass:"fr circle-box circle-right"})],1),s("div",{staticClass:"bottom-into"},[""!=t.date?s("div",{staticClass:"date"},[t._v(t._s(t.date))]):t._e(),s("div",{staticClass:"clearfix bottom-context"},[s("div",{staticClass:"fl counts"},[t._v("共计"+t._s(t.count)+"件商品")]),s("div",{staticClass:"fr total"},[t._v("合计：￥"+t._s(t.total))])])])])])])},i=[],r={name:"OrderLists",props:{infoTitleLeft:{type:String},isRight:{type:Boolean,default:!1},date:{type:String},count:{type:Number,default:0},total:{type:[Number,String],default:0},isStatus:{type:Number}},computed:{getReceive(){return 1!=this.isStatus}},methods:{confirmReceive(){this.$dialog.confirm({message:"确认该订单已经到手？"}).then((()=>{this.$emit("confirm-receive")})).catch((()=>{}))},remove(){this.$dialog.confirm({message:"正在删除订单，确认是否删除该订单？"}).then((()=>{this.$emit("remove")})).catch((()=>{}))}},beforeMount(){2==this.isState&&(this.isReceive=!this.isReceive)}},o=r,n=e(3736),l=(0,n.Z)(o,a,i,!1,null,"e7c60f0a",null),d=l.exports},5917:function(t,s,e){e.r(s),e.d(s,{default:function(){return v}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"PayView-box"},[s("NavBarTav",{attrs:{title:"订单详情"}}),s("div",{staticClass:"AddressInfo-box",on:{click:function(s){t.show=!t.show}}},[s("div",{staticClass:"title"},[s("h3",[t._v("选择地址")]),s("van-icon",{attrs:{name:"arrow",size:"15"}})],1),s("div",{staticClass:"address"},[s("van-cell",{scopedSlots:t._u([{key:"title",fn:function(){return[s("span",{staticClass:"name"},[t._v(t._s(t.addressData.name))]),s("span",{staticClass:"phon"},[t._v(t._s(t.addressData.tel))]),s("van-tag",{directives:[{name:"show",rawName:"v-show",value:t.addressData.isDefault,expression:"addressData.isDefault"}],attrs:{round:"",color:"blue",type:"danger"}},[t._v("默认")])]},proxy:!0},{key:"label",fn:function(){return[s("span",[t._v(t._s(t.addressData.province)+t._s(t.addressData.city)+t._s(t.addressData.county)+t._s(t.addressData.addressDetail))])]},proxy:!0}])})],1)]),s("br"),s("br"),s("div",{staticClass:"ShoppInfo-box"},[t.orderPayData.length>0?s("OrderLists",{attrs:{count:t.count,total:t.total}},t._l(t.orderPayData,(function(t,e){return s("OrderItem",{key:e,attrs:{item:t}})})),1):t._e()],1),s("div",{staticClass:"foo"},[s("van-button",{attrs:{round:"",type:"info",block:""},on:{click:t.onCommit}},[t._v("立即结算")])],1),s("van-popup",{attrs:{round:"",closeable:"",position:"bottom"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[s("h2",[t._v("选择地址")]),t._l(t.addressAllData,(function(e,a){return s("div",{key:a,staticClass:"list"},[s("van-radio-group",{model:{value:t.isChecked,callback:function(s){t.isChecked=s},expression:"isChecked"}},[s("van-radio",{attrs:{name:a},on:{click:function(s){t.isChecked=a}}},[s("van-cell",{staticClass:"address",scopedSlots:t._u([{key:"title",fn:function(){return[s("span",{staticClass:"name"},[t._v(t._s(e.name))]),s("span",{staticClass:"phon"},[t._v(t._s(e.tel))]),s("van-tag",{directives:[{name:"show",rawName:"v-show",value:e.isDefault,expression:"item.isDefault"}],attrs:{round:"",color:"blue",type:"danger"}},[t._v("默认")])]},proxy:!0},{key:"label",fn:function(){return[s("span",[t._v(t._s(e.province)+t._s(e.city)+t._s(e.county)+t._s(e.addressDetail))])]},proxy:!0}],null,!0)})],1)],1)],1)})),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"foo"},[s("van-button",{attrs:{round:"",type:"info",block:""},on:{click:t.goPage}},[t._v("添加地址")])],1)],2)],1)},i=[],r=e(8459),o=e(2209),n=e(3537),l={name:"PayView",data(){return{orderPayData:[],count:0,total:0,addressAllData:[],addressData:{},show:!1,isChecked:0}},components:{NavBarTav:r.Z,OrderLists:o.Z,OrderItem:n.Z},computed:{sidKeys(){return sessionStorage.getItem("sidKeys")}},watch:{isChecked(t){return this.addressData=this.addressAllData[t]}},methods:{getOrderInfo(){this.axios({method:"GET",url:"/commitShopcart",params:{appkey:this.appkey,tokenString:sessionStorage.getItem("userToken"),sids:this.sidKeys}}).then((t=>{5e4==t.data.code&&(t.data.result.map((t=>{this.count+=t.count,this.total+=t.price*t.count})),this.orderPayData=t.data.result)})).catch((t=>console.log(t)))},getAddressInfo(){this.axios({method:"GET",url:"/findAddress",params:{appkey:this.appkey,tokenString:sessionStorage.getItem("userToken")}}).then((t=>{if(2e4==t.data.code){let s=0;t.data.result.map((t=>{s+=1,1==t.isDefault&&(this.addressData=t,t.isChecked=0),t.isChecked=s-1})),this.addressAllData=t.data.result}}),(t=>{console.log(t)}))},onCommit(){let t=this.addressData.province+this.addressData.city+this.addressData.county+this.addressData.addressDetail;this.axios({method:"post",url:"/pay",data:{appkey:this.appkey,tokenString:sessionStorage.getItem("userToken"),sids:this.sidKeys,phone:this.addressData.tel,address:t,receiver:this.addressData.name}}).then((t=>{6e4==t.data.code&&(this.$toast(t.data.msg),setTimeout((()=>{sessionStorage.removeItem("sidKeys"),this.$router.push({name:"Order"})}),900))}),(t=>{console.log(t)}))},goPage(){this.$router.push({name:"NewAddress"})}},beforeMount(){null===this.sidKeys?this.$router.push({name:"Shopbag"}):(this.getOrderInfo(),this.getAddressInfo())}},d=l,c=e(3736),u=(0,c.Z)(d,a,i,!1,null,"009fd558",null),v=u.exports}}]);
//# sourceMappingURL=917.661bc5ad.js.map